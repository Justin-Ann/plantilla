<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plantilla Management System</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">
                <img src="img/dost-pagasa-logo.png" alt="DOST-PAGASA Logo">
            </div>
            <ul class="nav-menu">
                <li><a href="#" class="active" data-page="dashboard">DASHBOARD</a></li>
                <li><a href="#" data-page="data-management">DATA MANAGEMENT</a></li>
                <li><a href="#" data-page="applicants">APPLICANTS RECORDS</a></li>
                <li><a href="#" data-page="admin-account">ADMIN ACCOUNT</a></li>
                <li class="logout"><a href="logout.php">LOGOUT</a></li>
            </ul>
        </div>
        
        <div class="main-content">
            <div id="dashboard" class="page active">
                <h2>Dashboard</h2>
                <!-- Status Cards -->
                <div class="status-cards">
                    <div class="card clickable" id="on-process" onclick="showFilteredData('On-process')">
                        <h3>On-process</h3>
                        <p class="count">0</p>
                    </div>
                    <div class="card clickable" id="on-hold" onclick="showFilteredData('On-hold')">
                        <h3>On-hold</h3>
                        <p class="count">0</p>
                    </div>
                    <div class="card clickable" id="not-yet-filling" onclick="showFilteredData('Not yet for filling')">
                        <h3>Not yet for filling</h3>
                        <p class="count">0</p>
                    </div>
                </div>

                <!-- Monthly Files Section -->
                <div class="monthly-files">
                    <div class="section-header">
                        <h3>Monthly Files</h3>
                        <div class="controls">
                            <input type="month" id="month-picker">
                            <button id="upload-btn" class="action-btn">Upload File</button>
                            <input type="text" id="file-search" placeholder="Search files...">
                        </div>
                    </div>
                    <div class="data-table">
                        <table id="monthly-files-table">
                            <thead>
                                <tr>
                                    <th>Filename</th>
                                    <th>Upload Date</th>
                                    <th>Last Modified</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Recent Files Section -->
                <div class="recent-files">
                    <h3>Recently Modified Files</h3>
                    <div id="recent-files-list"></div>
                </div>
            </div>
            
            <div id="data-management" class="page">
                <h2>Data Management</h2>
                <div class="tabs">
                    <div class="tab" data-tab="office-org">Office and Organizational Code</div>
                    <div class="tab active" data-tab="spreadsheet">Spreadsheet</div>
                </div>

                <div id="office-org-content" class="tab-content">
                    <div class="division-filter">
                        <input type="month" id="division-month-filter">
                        <button id="load-division-files" class="action-btn">Load Files</button>
                    </div>
                    <div class="division-list">
                        <?php
                        $divisions = [
                            ['code' => 1, 'name' => 'Office of the Administrator'],
                            ['code' => 2, 'name' => 'Administrative Division'],
                            ['code' => 3, 'name' => 'Human Resources Management and Development Section'],
                            ['code' => 4, 'name' => 'Records Management Section'],
                            ['code' => 5, 'name' => 'Procurement, Property and General Services Section'],
                            ['code' => 6, 'name' => 'Financial, Planning and Management Division'],
                            ['code' => 7, 'name' => 'Accounting Section'],
                            ['code' => 8, 'name' => 'Budget and Planning Section'],
                            ['code' => 9, 'name' => 'Management Services Section'],
                            ['code' => 10, 'name' => 'Engineering and Technical Services Division'],
                            ['code' => 11, 'name' => 'Meteorological Equipment and Telecommunications Technology Services Section'],
                            ['code' => 12, 'name' => 'Meteorological Guides and Standards Section'],
                            ['code' => 13, 'name' => 'Mechanical, Electrical and Infrastructure Engineering Section'],
                            ['code' => 14, 'name' => 'Weather Division'],
                            ['code' => 15, 'name' => 'Weather Forecasting Section'],
                            ['code' => 16, 'name' => 'Meteorological Data and Information Exchange Section'],
                            ['code' => 17, 'name' => 'Techniques Application and Meteorological Satellite Section'],
                            ['code' => 18, 'name' => 'Aeronautical Meteorological Satellite Section'],
                            ['code' => 19, 'name' => 'Marine Meteorological Services Section'],
                            ['code' => 20, 'name' => 'Hydro-Meteorological Division'],
                            ['code' => 21, 'name' => 'Hydrometeorological Data Applications Sections'],
                            ['code' => 22, 'name' => 'Flood Forecasting and Warning Section'],
                            ['code' => 23, 'name' => 'Hydrometeorological Telemetry Section'],
                            ['code' => 24, 'name' => 'Climatology and Agrometeorology Division'],
                            ['code' => 25, 'name' => 'Climate Monitoring and Prediction Section'],
                            ['code' => 26, 'name' => 'Farm Weather Services Section'],
                            ['code' => 27, 'name' => 'Impact Assessment and Applications Section'],
                            ['code' => 28, 'name' => 'Climate and Agrometeorology Data Section'],
                            ['code' => 29, 'name' => 'Research and Development and Training Division'],
                            ['code' => 30, 'name' => 'Astronomy and Space Sciences Section'],
                            ['code' => 31, 'name' => 'Climate and Agrometeorology Research and Development Section'],
                            ['code' => 32, 'name' => 'Hydrometeorology, Tropical Meteorology and Instrument Research and Development'],
                            ['code' => 33, 'name' => 'Numerical Modeling Section'],
                            ['code' => 34, 'name' => 'Training and Public Information Section'],
                            ['code' => 35, 'name' => 'Northern Luzon PAGASA Regional Services Division'],
                            ['code' => 36, 'name' => 'Agno Flood Forecasting and Warning System'],
                            ['code' => 37, 'name' => 'Pampanga Flood Forecasting and Warning System'],
                            ['code' => 38, 'name' => 'Southern Luzon PAGASA Regional Services Division'],
                            ['code' => 39, 'name' => 'Bicol Flood Forecasting and Warning System'],
                            ['code' => 40, 'name' => 'Visayas PAGASA Regional Services Division'],
                            ['code' => 41, 'name' => 'Northern Mindanao PAGASA Regional Services Division'],
                            ['code' => 42, 'name' => 'Southern Mindanao PAGASA Regional Services Division'],
                            ['code' => 43, 'name' => 'Field Stations']
                        ];
                        
                        foreach($divisions as $div): ?>
                        <div class="division-item" data-division-code="<?= $div['code'] ?>" data-division-name="<?= $div['name'] ?>">
                            <div class="division-header">
                                <span class="division-code"><?= $div['code'] ?></span>
                                <span class="division-name"><?= $div['name'] ?></span>
                            </div>
                            <div class="division-actions">
                                <button class="view-data-btn">View Data</button>
                                <button class="open-files-btn">Files</button>
                            </div>
                        </div>
                        <?php endforeach; ?>
                    </div>
                </div>

                <div id="spreadsheet-content" class="tab-content active">
                    <div class="spreadsheet-toolbar">
                        <select id="division-filter">
                            <option value="">Select Division</option>
                            <!-- Division options will be dynamically added -->
                        </select>
                        <button id="save-changes" class="action-btn">Save Changes</button>
                    </div>
                    <div class="spreadsheet-container">
                        <table id="spreadsheet-table" class="data-table">
                            <!-- Table content will be dynamically populated -->
                        </table>
                    </div>
                </div>
            </div>
            
            <div id="applicants" class="page">
                <h2>Applicants Records</h2>
                <div class="filters-section">
                    <select id="month-filter">
                        <option value="">Select Month</option>
                        <!-- Months will be populated dynamically -->
                    </select>
                    <select id="division-filter">
                        <option value="">Select Division</option>
                        <!-- Divisions will be populated dynamically -->
                    </select>
                    <input type="text" id="applicant-search" placeholder="Search by name...">
                </div>
                
                <div class="data-table">
                    <table id="applicants-table">
                        <thead>
                            <tr>
                                <th>ID NO.</th>
                                <th>FULLNAME</th>
                                <th>LAST NAME</th>
                                <th>FIRST NAME</th>
                                <th>MIDDLE NAME</th>
                                <th>EXTNAME</th>
                                <th>MI</th>
                                <th>SEX</th>
                                <th>POSITION TITLE</th>
                                <th>ITEM NUMBER</th>
                                <th>TECHCODE</th>
                                <th>LEVEL</th>
                                <th>APPOINTMENT STATUS</th>
                                <th>SG</th>
                                <th>STEP</th>
                                <th>MONTHLY SALARY</th>
                                <th>DATE OF BIRTH</th>
                                <th>DATE ORIG. APPT.</th>
                                <th>DATE GOVT SRVC</th>
                                <th>DATE LAST PROMOTION</th>
                                <th>DATE LAST INCREMENT</th>
                                <th>DATE OF LONGEVITY</th>
                                <th>ACTIONS</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <div id="admin-account" class="page">
                <h2>Admin Account Management</h2>
                <div class="admin-section">
                    <div class="user-management">
                        <h3>User Information Management</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Last Login</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="users-list">
                                <!-- Users will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal for editing data -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modal-title">Edit Record</h2>
            <form id="edit-form">
                <input type="hidden" id="edit-id">
                <div class="form-group">
                    <label for="edit-remarks">Remarks:</label>
                    <select id="edit-remarks">
                        <option value="On-process">On-process</option>
                        <option value="On-hold">On-hold</option>
                        <option value="Not yet for filling">Not yet for filling</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-date-published">Date Published:</label>
                    <input type="date" id="edit-date-published">
                </div>
                <div class="form-group">
                    <label for="edit-status">Status:</label>
                    <select id="edit-status">
                        <option value="On-process">On-process</option>
                        <option value="On-hold">On-hold</option>
                        <option value="Not yet for filling">Not yet for filling</option>
                    </select>
                </div>
                <button type="submit">Save Changes</button>
            </form>
        </div>
    </div>
    
    <!-- Modal for adding/editing applicant -->
    <div id="applicant-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 class="modal-title">Add New Applicant</h2>
            <form id="applicant-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="fullname">Full Name:</label>
                        <input type="text" id="fullname" required>
                    </div>
                    <div class="form-group">
                        <label for="sex">Sex:</label>
                        <select id="sex">
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="position-title">Position Title:</label>
                        <input type="text" id="position-title" required>
                    </div>
                    <div class="form-group">
                        <label for="techcode">Techcode:</label>
                        <input type="text" id="techcode">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="date-of-birth">Date of Birth:</label>
                        <input type="date" id="date-of-birth">
                    </div>
                    <div class="form-group">
                        <label for="date-last-promotion">Date Last Promotion:</label>
                        <input type="date" id="date-last-promotion">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="date-last-increment">Date Last Increment:</label>
                        <input type="date" id="date-last-increment">
                    </div>
                    <div class="form-group">
                        <label for="date-of-longevity">Date of Longevity:</label>
                        <input type="date" id="date-of-longevity">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="appointment-status">Appointment Status:</label>
                        <select id="appointment-status">
                            <option value="PERMANENT">PERMANENT</option>
                            <option value="TEMPORARY">TEMPORARY</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="plantilla-no">Plantilla No:</label>
                        <select id="plantilla-no"></select>
                    </div>
                </div>
                <button type="submit">Save Applicant</button>
            </form>
        </div>
    </div>

    <!-- Update file upload modal -->
    <div id="upload-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Upload File</h2>
            <form id="file-upload-form" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="upload-month">Select Month:</label>
                    <input type="month" id="upload-month" name="month_year" required>
                </div>
                <div class="form-group">
                    <label for="upload-file">Choose File:</label>
                    <input type="file" id="upload-file" name="file" accept=".xlsx,.xls,.csv" required>
                    <small class="help-text">Allowed formats: .xlsx, .xls, .csv</small>
                </div>
                <button type="submit" class="action-btn">Upload</button>
            </form>
        </div>
    </div>
    
    <script src="js/script.js"></script>
    <script src="js/division_handler.js"></script>
</body>
</html>